<html>
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <div>
      <p>
        This is a live example of how to get rasterized SVG in WebWorker
        without blocking the main thread:
      </p>
      <ol>
        <li>In the main thread, we create a new MessageChannel</li>
        <li>
          Then, in the same main thread, we create a web worker and an Iframe
          and forward the MessageChannel ports (part1 and part2) to them.
        </li>
        <li>
          WebWorker passes the necessary data to an Iframe, in which the SVG is
          converted to a raster and sent as an ImageBitmap back to WebWorker.
        </li>
      </ol>
      <p>
        For clarity, the rasterized image is passed to the main thread and
        displayed on the canvas
      </p>
      
      <p>
        <a href="https://olegbarabanov.ru/dev/dekodirovanie-svg-v-webworker-v-javascript" target="_blank">Read more in this article (original lang = rus, use a translator)</a>
       </p>
      
      <div>
        <p>See result (below it should be a canvas with a smiley face):</p>
        <canvas id="canvas-for-rasterized-svg"></canvas>
      </div>
    </div>
    <iframe id="frame-for-rasterized-svg" src="iframe.html"></iframe>
    <script src="main.js"></script>
  </body>
</html>
